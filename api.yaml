openapi: 3.0.3

info:
  title: RaceDay API
  version: "0.9"


paths:

  /broadcast:

    delete:
      operationId: broadcastDelete

      summary: Deletes a broadcast.

      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
            format: uuid

      responses:
        "200":
          description: Successful response.
        "404":
          description: Broadcast not found.

    post:
      operationId: broadcastPost

      summary: Creates a new broadcast.

      parameters:
        - name: type
          in: query
          required: true
          schema:
            type: string
            enum: [ "Cable", "Facebook", "MotorTrend", "YouTube" ]
        - name: event_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: url
          in: query
          schema:
            type: string
            format: uri

      responses:
        "200":
          description: Successful response indicating the ID of the new broadcast.
          content:
            application/json:
              schema:
                type: string
                format: uuid

    put:
      operationId: broadcastPut

      summary: Updates a broadcast.

      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: type
          in: query
          schema:
            type: string
            enum: ["Cable", "Facebook", "MotorTrend", "YouTube"]
        - name: event_id
          in: query
          schema:
            type: string
            format: uuid
        - name: url
          in: query
          schema:
            type: string
            format: uri

      responses:
        "200":
          description: Successful response.
        "404":
          description: Broadcast not found.

  /broadcasts:

    get:
      operationId: broadcastsGet

      summary: Retrieves broadcasts per the specified criteria. All parameters are optional.

      parameters:
        - name: event_id
          in: query
          description: An ID of an event for which to retrieve broadcasts.
          schema:
            type: string
            format: uuid
        - name: event_start
          in: query
          description: A UNIX timestamp indicating a particular date on which returned broadcasts must start.
          schema:
            type: number
            format: int64

      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Broadcast"
        "404":
          description: Event not found.

  /event:

    delete:
      operationId: eventDelete

      summary: Deletes an event.

      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
            format: uuid

      responses:
        "200":
          description: Successful response.
        "404":
          description: Event not found.

    post:
      operationId: eventPost

      summary: Creates a new event.

      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
        - name: start
          in: query
          required: true
          schema:
            type: number
            format: int64
        - name: description
          in: query
          schema:
            type: string
        - name: location_id
          in: query
          schema:
            type: string
            format: uuid
        - name: series_id
          in: query
          schema:
            type: string
            format: uuid

      responses:
        "200":
          description: Successful response indicating the ID of the new event.
          content:
            application/json:
              schema:
                type: string
                format: uuid

    put:
      operationId: eventPut

      summary: Updates an event.

      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
        - name: start
          in: query
          required: true
          schema:
            type: number
            format: int64
        - name: description
          in: query
          schema:
            type: string
        - name: location_id
          in: query
          schema:
            type: string
            format: uuid
        - name: series_id
          in: query
          schema:
            type: string
            format: uuid

      responses:
        "200":
          description: Successful response.
        "404":
          description: Event not found.

  /events:

    get:
      operationId: eventsGet

      summary: Retrieves events in the database for the specified date or dates.

      parameters:
        - name: window_start
          in: query
          description: A UNIX timestamp indicating a particular date on which returned events must start.
          required: true
          schema:
            type: number
            format: int64
        - name: window_end
          in: query
          description: An optional UNIX timestamp indicating the end of a window in which returned events must start,
            where `window_start` indicates the beginning of the window. If not specified, only events that start on the
            date indicated by `window_start` will be returned.
          schema:
            type: number
            format: int64

      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Event"

  /location:

    delete:
      operationId: locationDelete

      summary: Deletes a location.

      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
            format: uuid

      responses:
        "200":
          description: Successful response.
        "404":
          description: Location not found.

    post:
      operationId: locationPost

      summary: Creates a new location.

      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
        - name: description
          in: query
          schema:
            type: string

      responses:
        "200":
          description: Successful response indicating the ID of the new location.
          content:
            application/json:
              schema:
                type: string
                format: uuid

    put:
      operationId: locationPut

      summary: Updates a location.

      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: name
          in: query
          required: true
          schema:
            type: string
        - name: description
          in: query
          schema:
            type: string

      responses:
        "200":
          description: Successful response.
        "404":
          description: Location not found.

  /locations:

    get:
      operationId: locationsGet

      summary: Retrieves the locations currently defined in the system.

      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Location"

  /series:

    delete:
      operationId: seriesDelete

      summary: Deletes a series.

      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
            format: uuid

      responses:
        "200":
          description: Successful response.
        "404":
          description: Series not found.

    get:
      operationId: seriesGet

      summary: Retrieves the series currently defined in the system.

      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Series"

    post:
      operationId: seriesPost

      summary: Creates a new series.

      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
        - name: description
          in: query
          schema:
            type: string

      responses:
        "200":
          description: Successful response indicating the ID of the new series.
          content:
            application/json:
              schema:
                type: string
                format: uuid

    put:
      operationId: seriesPut

      summary: Updates a series.

      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: name
          in: query
          required: true
          schema:
            type: string
        - name: description
          in: query
          schema:
            type: string

      responses:
        "200":
          description: Successful response.
        "404":
          description: Series not found.


components:

  schemas:

    Broadcast:
      type: object
      properties:
        id:
          type: string
          format: uuid
        type:
          type: string
          enum: ["Cable", "Facebook", "MotorTrend", "YouTube"]
        url:
          type: string
      required:
        - id
        - type

    Event:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        start:
          type: number
          format: int64
        description:
          type: string
        location:
          $ref: "#/components/schemas/Location"
        series:
          $ref: "#/components/schemas/Series"
      required:
        - id
        - name

    Location:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
      required:
        - id
        - name

    Series:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
      required:
        - id
        - name
